{"version":3,"sources":["assets/Script/Score.js"],"names":["cc","Class","Component","properties","Money","Level","TargetScore","MaxScore","MoneyBroad","type","TimeBroad","LevelBroad","TargetScoreBroad","start","LoadMaxScore","updateTime","time","label","getComponent","Label","string","setLevel","level","sys","localStorage","setItem","loadLevel","Number","parseInt","getItem","isInteger","updateLevel","LoadMoney","Math","pow","updateTargetScore","LevelUp","lv","SaveMoney","addScore","score","canNext","setMemMoney","money","setMaxScore"],"mappings":"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","sourceRoot":"/","sourcesContent":["/*\n * @Author: czqczqzzzzzz(czq)\n * @Email: tenchenzhengqing@qq.com\n * @Date: 2023-05-30 21:40:36\n * @LastEditors: 陈正清MacPro\n * @LastEditTime: 2023-06-04 22:47:44\n * @FilePath: /goldminer-demo/assets/Script/Score.js\n * @Description: 得分相关实现\n * \n * Copyright (c) by czqczqzzzzzz(czq), All Rights Reserved. \n */\n// Learn cc.Class:\n//  - https://docs.cocos.com/creator/manual/en/scripting/class.html\n// Learn Attribute:\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        Money:0,\n        Level:0,\n        TargetScore:0,\n        MaxScore:0,\n\n        MoneyBroad:{\n            default:null,\n            type:cc.Component\n        },        \n        TimeBroad:{\n            default:null,\n            type:cc.Component            \n        },\n        LevelBroad:{\n            default:null,\n            type:cc.Component            \n        },\n        TargetScoreBroad:{\n            default:null,\n            type:cc.Component            \n        },\n        // foo: {\n        //     // ATTRIBUTES:\n        //     default: null,        // The default value will be used only when the component attaching\n        //                           // to a node for the first time\n        //     type: cc.SpriteFrame, // optional, default is typeof default\n        //     serializable: true,   // optional, default is true\n        // },\n        // bar: {\n        //     get () {\n        //         return this._bar;\n        //     },\n        //     set (value) {\n        //         this._bar = value;\n        //     }\n        // },\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    // onLoad () {},\n\n    start () {\n        this.LoadMaxScore()\n    },\n\n    // update (dt) {},\n\n    updateTime(time){\n        let label=this.TimeBroad.getComponent(cc.Label)\n        label.string=`${time}`\n    },\n\n    setLevel(level){\n        cc.sys.localStorage.setItem('level',level);\n    },\n\n    loadLevel(){\n        this.Level = Number.parseInt(cc.sys.localStorage.getItem('level'))\n        if(!this.Level||!Number.isInteger(this.Level)){\n            cc.sys.localStorage.setItem('level',1);\n            this.Level=1\n        }\n        this.updateLevel()\n        this.LoadMoney()\n    },\n    updateLevel(){\n        let label=this.LevelBroad.getComponent(cc.Label)\n        label.string=`第${this.Level}关`\n        // this.TargetScore=1000*this.Level\n        this.TargetScore=1000*Math.pow(this.Level,2)\n        this.updateTargetScore()\n    },\n    LevelUp(){\n        let lv=Number.parseInt(this.Level) + 1\n        cc.sys.localStorage.setItem('level', lv);\n        this.SaveMoney()\n    },\n\n    addScore(score){\n        this.Money+=score\n        let label=this.MoneyBroad.getComponent(cc.Label)\n        label.string=`${this.Money}$`\n    },\n\n    updateTargetScore(){\n        let label=this.TargetScoreBroad.getComponent(cc.Label)\n        label.string=`${this.TargetScore}$`\n    },\n\n    canNext(){\n        return this.Money>=this.TargetScore\n    },\n\n    SaveMoney(){\n        cc.sys.localStorage.setItem('money',this.Money);\n    },\n\n    LoadMoney(){\n        this.Money = Number.parseInt(cc.sys.localStorage.getItem('money'))\n        if(!this.Money||!Number.isInteger(this.Money)){\n            cc.sys.localStorage.setItem('money',this.Money);\n            this.Money=0\n        }\n        this.addScore(0)\n    },\n\n    setMemMoney(money){\n        cc.sys.localStorage.setItem('money',money);\n    },\n\n    LoadMaxScore(){\n        this.MaxScore = Number.parseInt(cc.sys.localStorage.getItem('maxscore'))\n        if(!this.MaxScore||!Number.isInteger(this.MaxScore)){\n            cc.sys.localStorage.setItem('maxscore',this.MaxScore);\n            this.MaxScore=0\n        }        \n    },\n\n    setMaxScore(){\n        cc.sys.localStorage.setItem('maxscore',this.Money);\n    }\n\n});\n"]}